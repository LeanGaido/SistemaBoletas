@model SecSisBoletas.Models.RegisterViewModel
@{
    ViewBag.Title = "Registrarse";
    Layout = null;
}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>@ViewBag.Title - My ASP.NET Application</title>
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
    <!-- Bootstrap Core CSS -->
    <link href="~/Areas/Empresas/Content/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Menu CSS -->
    <link href="~/Areas/Empresas/Content/plugins/bower_components/sidebar-nav/dist/sidebar-nav.min.css" rel="stylesheet">
    <!-- toast CSS -->
    <link href="~/Areas/Empresas/Content/plugins/bower_components/toast-master/css/jquery.toast.css" rel="stylesheet">
    <!-- animation CSS -->
    <link rel="stylesheet" href="~/Areas/Empresas/Content/css/animate.css" />
    <!-- Custom CSS -->
    <link rel="stylesheet" href="~/Areas/Empresas/Content/css/style.css" />
    <!-- color CSS -->
    <link href="~/Areas/Empresas/Content/css/colors/blue.css" id="theme" rel="stylesheet">
    <!-- bootstrap-select CSS-->

</head>
    <body>
        <div class="row" id="wrapper-usuario">
            <div class="col-md-6" id="inner-wrapper-usuario">
                <img src="~/Areas/Empresas/Content/images/logo-sindicoweb-min.png" class="img-responsive">
                <br>
                @using (Html.BeginForm("Register", "Account", FormMethod.Post, new { @class = "form-horizontal form-material", id = "loginform", role = "form" }))
                {
                    @Html.AntiForgeryToken()
                    @Html.ValidationSummary();
                    <h4 class="box-title"><b>Crear Cuenta de Usuario</b></h4>
                    <span>Ingrese los datos solicitados a continuación para crear su cuenta de usuario.</span>
                    <div class="form-group m-t-20">
                        <div class="col-xs-6">
                            @Html.EditorFor(Model => Model.RazonSocial, new { htmlAttributes = new { @class = "form-control", placeholder = "Razon Social", required = "true" } })
                        </div>
                        <div class="col-xs-6">
                            @Html.EditorFor(Model => Model.NombreFantasia, new { htmlAttributes = new { @class = "form-control", placeholder = "Nombre Fantasía", required = "true" } })
                            <span class="text text-danger">@Html.ValidationMessageFor(model => model.NombreFantasia)</span>
                        </div>
                    </div>
                    <div class="form-group m-t-20">
                        <div class="col-xs-6">
                            @Html.EditorFor(Model => Model.Cuit, new { htmlAttributes = new { @class = "form-control", placeholder = "CUIT (sin guiones)", type = "number", required = "true" } })
                            <span class="text text-danger">@Html.ValidationMessageFor(model => model.Cuit)</span>
                        </div>
                        <div class="col-xs-6">
                            @Html.DropDownListFor(model => model.IdActividad, null, new { @class = "form-control" })
                            <span class="text text-danger">@Html.ValidationMessageFor(model => model.IdActividad)</span>
                        </div>
                    </div>
                    <div class="form-group m-t-20">
                        <div class="col-xs-6">
                            @Html.DropDownList("IdProvincia", null, new { @class = "form-control" })
                        </div>
                        <div class="col-xs-6">
                            <select name="IdLocalidad" id="IdLocalidad" class="form-control" required>
                                <option value="0">Seleccione Una Ciudad</option>
                            </select>
                            <span class="text text-danger">@Html.ValidationMessageFor(model => model.IdLocalidad)</span>
                        </div>
                    </div>
                    <div class="form-group m-t-20">
                        <div class="col-xs-4">
                            @Html.EditorFor(Model => Model.Calle, new { htmlAttributes = new { @class = "form-control", placeholder = "Calle", required = "true" } })
                            <span class="text text-danger">@Html.ValidationMessageFor(model => model.Calle)</span>
                        </div>
                        <div class="col-xs-4">
                            @Html.EditorFor(Model => Model.Altura, new { htmlAttributes = new { @class = "form-control", placeholder = "Altura", onkeydown = "javascript: return event.keyCode == 69 ? false : true", required = "true" } })
                            <span class="text text-danger">@Html.ValidationMessageFor(model => model.Altura)</span>
                        </div>
                        <div class="col-xs-4">
                            <input type="text" id="CodPostal" class="form-control" placeholder="Cód. Postal" , required>
                        </div>
                    </div>
                    <div class="form-group m-t-20">
                        <div class="col-xs-6">
                            @Html.EditorFor(Model => Model.TelefonoFijo, new { htmlAttributes = new { @class = "form-control", placeholder = "Telefono Fijo", type = "number", onkeydown = "javascript: return event.keyCode == 69 ? false : true" } })
                            <span class="text text-danger">@Html.ValidationMessageFor(model => model.TelefonoFijo)</span>
                        </div>
                        <div class="col-xs-6">
                            @Html.EditorFor(Model => Model.TelefonoCelular, new { htmlAttributes = new { @class = "form-control", placeholder = "Celular", type = "number", onkeydown = "javascript: return event.keyCode == 69 ? false : true", required = "true" } })
                            <span class="text text-danger">@Html.ValidationMessageFor(model => model.TelefonoCelular)</span>
                        </div>
                    </div>
                    <div class="form-group m-t-20">
                        <div class="col-xs-12">
                            @Html.EditorFor(Model => Model.Email, new { htmlAttributes = new { @class = "form-control", placeholder = "Email", required = "true", autocomplete = "new-password" } })
                            <span class="text text-info">Ingrese un correo válido y en funcionamiento para poder luego activar la cuenta de usuario</span>
                            <span class="text text-danger">@Html.ValidationMessageFor(model => model.Email)</span>
                        </div>
                    </div>
                    <div class="form-group m-t-20">
                        <div class="col-xs-12">
                            @Html.PasswordFor(m => m.Password, new { @class = "form-control", placeholder = "Contraseña", required = "true", autocomplete = "new-password" })
                            <span>
                                La CONTRASEÑA deberá tener 6 caracteres,  COMO MINIMO. -Deberá tener, COMO MINIMO, UNA Letra Mayúscula, UNA Letra Miúscula, Un Número y UN caracter especial (Ej.: ¡,-;$).
                            </span>
                            <span class="text text-danger">@Html.ValidationMessageFor(model => model.Password)</span>
                        </div>
                    </div>
                    <div class="form-group m-t-20">
                        <div class="col-xs-12">
                            @Html.PasswordFor(m => m.ConfirmPassword, new { @class = "form-control", placeholder = "Repetir Contraseña", required = "true", autocomplete = "new-password" })
                            <span>
                                La CONTRASEÑA deberá tener 6 caracteres,  COMO MINIMO. -Deberá tener, COMO MINIMO, UNA Letra Mayúscula, UNA Letra Miúscula, Un Número y UN caracter especial (Ej.: ¡,-;$).
                            </span>
                            <br />
                            <span class="text text-danger">@Html.ValidationMessageFor(model => model.ConfirmPassword)</span>
                        </div>
                    </div>
                    <div class="form-group text-center m-t-20">
                        <div class="col-xs-12">
                            <button class="btn btn-info btn-lg btn-block text-uppercase waves-effect waves-light" type="submit">CREAR CUENTA</button>
                        </div>
                    </div>
                    <div class="form-group m-b-0">
                        <div class="col-sm-12 text-center">
                            <p>¿Ya tiene una cuenta de usuario?. <a href="login"><b>Login</b></a></p>
                        </div>
                    </div>
                }
            </div>
            <div class="col-md-6" id="background-usuario"></div>
        </div>

        @section Scripts {
            @Scripts.Render("~/bundles/jqueryval")
        }

        <script type="text/javascript" src="~/Scripts/jquery-3.3.1.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.7/dist/js/bootstrap-select.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                $("#IdLocalidad").empty();
                $("#CodPostal").val("");
                $.ajax({
                    type: "POST",
                    traditional: true,
                    async: false,
                    cache: false,
                    url: '@Url.Action("GetLocalidades", "Empresas/Localidades")',
                    data: {
                        IdProvincia: $("#IdProvincia").val()
                    },
                    dataType: 'json',
                    success: function (data) {
                        $.each(data, function (i, data) {
                            $("#IdLocalidad").append('<option value="'
                                + data.IdLocalidad + '">'
                                + data.Nombre + '</option>');
                            @{
                                var idLocalidad = 0;
                                idLocalidad = (Model != null) ? Model.IdLocalidad : 0;
                            };
                            var idLocalidad = @idLocalidad;
                            $("#IdLocalidad").val(idLocalidad);
                            $('#CodPostal').val(data.CodPostal);
                        });
                    },
                    error: function (ex) {
                        alert('Selecciona una Provincia Valida.');
                    }
                });
            })
            $("#IdProvincia").change(function () {
                $("#IdLocalidad").empty();
                $("#CodPostal").val("");
                $.ajax({
                    type: "POST",
                    traditional: true,
                    async: false,
                    cache: false,
                    url: '@Url.Action("GetLocalidades", "Empresas/Localidades")',
                    data: {
                        IdProvincia: $("#IdProvincia").val()
                    },
                    dataType: 'json',
                    success: function (data) {
                        $.each(data, function (i, data) {
                            $("#IdLocalidad").append('<option value="'
                                + data.IdLocalidad + '">'
                                + data.Nombre + '</option>');
                            $('#CodPostal').val(data.CodPostal);
                        });
                    },
                    error: function (ex) {
                        alert('Selecciona una Provincia Valida.');
                    }
                });
                return false;
            })
            $("#IdLocalidad").change(function () {
                $("#CodPostal").empty();
                $.ajax({
                    type: "POST",
                    traditional: true,
                    async: false,
                    cache: false,
                    url: '@Url.Action("GetCodPostal", "Empresas/Localidades")',
                    data: {
                        IdLocalidad: $("#IdLocalidad").val()
                    },
                    dataType: 'json',
                    success: function (data) {
                        $('#CodPostal').val(data);
                    },
                    error: function (ex) {
                        alert('A ocurrido un error, intente nuevamente.');
                    }
                });
                return false;
            })
            
            $('#Cuit').keypress(function (e) {
                if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 110, 190]) !== -1 || (e.keyCode == 65 && e.ctrlKey === true) || (e.keyCode >= 35 && e.keyCode <= 39)) {
                    return;
                };
                if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
                    e.preventDefault();
                };
            });
        </script>
    </body>
</html>